(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fe34145"],{"866c":function(e,t,a){"use strict";a("c17a")},c17a:function(e,t,a){},e4ce:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"main-content-container",style:{height:e.heightPXLimit}},[t("el-aside",{staticClass:"main-left",attrs:{width:"0"}},[t("div",[t("el-row",{staticClass:"header-row"},[t("el-col",{attrs:{span:16}},[t("el-tooltip",{attrs:{content:"任务组: "+e.taskGroupName,placement:"top-end"}},[[t("div",{staticClass:"left"},[t("span",[e._v("对比记录")]),t("span",{staticClass:"gray",style:{"margin-left":"10px","font-size":"14px"}},[e._v(" 任务组: "+e._s(e.taskGroupName))])])]],2)],1),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"right"},[t("a",{attrs:{title:"切换布局"},on:{click:function(t){return e.changeLayout()}}},[t("svg-icon",{attrs:{"class-name":"svg-transform","icon-class":"transform"}})],1),t("UploadFileOrCreateTask",{staticClass:"upload-file-or-create-task",on:{"on-click-upload":e.handleOnClickUpload,"on-created-task":e.handleOnCreatedTask}})],1)])],1)],1),t("div",{staticClass:"orders"},[void 0!==e.compareLogData?t("ul",{attrs:{"infinite-scroll-immediate":"true"}},[e._l(e.compareLogData.orders,(function(a,s){return t("li",{key:a.id},[t("el-row",{staticClass:"order"},[t("el-col",[t("div",[t("el-row",[t("el-col",{attrs:{span:16}},[t("span",{staticClass:"notice"},[e._v("名称：")]),t("span",[e._v(e._s(a.title?a.title:"对比记录"+a.id))])]),t("el-col",{staticClass:"compare",attrs:{span:4}},[t("a",{on:{click:function(t){return e.gotoCompareResult(s)}}},[e._v("对比")])]),t("el-col",{staticClass:"download",attrs:{span:4}},[t("a",{on:{click:function(t){return e.downloadCompareResult(a.id)}}},[e._v("下载")])])],1),t("el-row",[t("el-col",[t("span",{staticClass:"notice"},[e._v("状态：")]),t("span",{staticClass:"success"},[e._v("已完成")])])],1),t("el-row",[t("el-col",[t("span",{staticClass:"notice"},[e._v("时间：")]),t("span",[e._v(e._s(a.createTime))])])],1),t("el-collapse",[t("el-collapse-item",{attrs:{name:a.id},scopedSlots:e._u([{key:"title",fn:function(){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.isShow(s)}}},[e._v(e._s(e.isFoldArray[s]))])]},proxy:!0}],null,!0)},[t("el-row",{staticClass:"file-list"},[t("el-col",{attrs:{span:20}},[t("span",[e._v(e._s(void 0!==a.files&&void 0!==a.files[0]?a.files[0].name:""))])]),t("el-col",{attrs:{span:4}},[t("span",{staticClass:"success"},[e._v("已完成")])])],1),t("el-row",{staticClass:"file-list"},[t("el-col",{attrs:{span:20}},[t("span",[e._v(e._s(void 0!==a.files&&void 0!==a.files[1]?a.files[1].name:""))])]),t("el-col",{attrs:{span:4}},[t("span",{staticClass:"normal"},[e._v("已完成")])])],1),t("el-row",{staticClass:"time-line"},[t("el-col",{attrs:{span:2}},[(a.status,t("svg-icon",{attrs:{"icon-class":"play"}}))],1),t("el-col",{attrs:{span:19}},[t("el-progress",{attrs:{percentage:(a.status,100),"stroke-width":10,"show-text":!1}})],1),t("el-col",{attrs:{span:3}},[t("div",[t("span",[e._v(e._s((a.status,100))+"%")])])])],1)],1)],1)],1)])],1)],1)})),e.isLoading?t("p",{staticClass:"loading"},[t("span")]):e._e(),e.noMore?t("li",[t("p",[e._v("没有更多了")])]):e._e()],2):e._e()])]),t("el-main",{staticClass:"main-right"},[t("el-container",[t("el-header",{attrs:{height:"auto"}},[e.compareResultImgUrl?t("el-row",{staticClass:"main-right-header"},[t("el-col",{attrs:{span:4}},[e.compareResultReferenceFileName?t("el-tooltip",{attrs:{placement:"top-start",content:e.compareResultReferenceFileName}},[[t("div",[t("span",{staticClass:"gray"},[e._v("参考图纸名称: ")]),t("span",[e._v(e._s(e.compareResultReferenceFileName))])])]],2):t("div",[t("span",{staticClass:"gray"},[e._v("参考图纸名称: ")]),t("span",[e._v(e._s(e.compareResultReferenceFileName))])])],1),t("el-col",{attrs:{span:3}},[t("el-tooltip",{attrs:{placement:"top-start",content:e.compareResult.size}},[[t("div",[t("span",{staticClass:"gray"},[e._v("大小: ")]),t("span",[e._v(e._s(e.compareResult.size))])])]],2)],1),t("el-col",{attrs:{span:4}},[e.compareResultCompareFileName?t("el-tooltip",{attrs:{placement:"top-start",content:e.compareResultCompareFileName}},[[t("div",[t("span",{staticClass:"gray"},[e._v("对比图纸名称: ")]),t("span",[e._v(e._s(e.compareResultCompareFileName))])])]],2):t("div",[t("span",{staticClass:"gray"},[e._v("对比图纸名称: ")]),t("span",[e._v(e._s(e.compareResultCompareFileName))])])],1),t("el-col",{attrs:{span:3}},[t("el-tooltip",{attrs:{placement:"top-start",content:e.compareResult.size}},[[t("div",[t("span",{staticClass:"gray"},[e._v("大小: ")]),t("span",[e._v(e._s(e.compareResult.size))])])]],2)],1),t("el-col",{attrs:{span:4}},[t("el-tooltip",{attrs:{placement:"top-start",content:e.compareResult.resolution}},[[t("div",[t("span",{staticClass:"gray"},[e._v("图纸分辨率: ")]),t("span",[e._v(e._s(e.compareResult.resolution))])])]],2)],1),t("el-col",{style:{color:"#FF0000"},attrs:{span:3}},[t("span",[e._v("红色: ")]),t("span",[e._v("代表修改部分")])]),t("el-col",{style:{color:"#7ebf50"},attrs:{span:3}},[t("span",[e._v("绿色: ")]),t("span",[e._v("代表删除部分")])])],1):e._e()],1),t("el-main",[t("div",{staticClass:"right-main-img"},[t("el-image",{attrs:{src:e.compareResultImgUrl,previewSrcList:[e.compareResultImgUrl]}})],1)])],1)],1),e.IsUploadDialogShow?t("UploadDialog",{attrs:{"task-id":e.compareLogData.id},on:{onClose:function(t){e.IsUploadDialogShow=!1},onComplete:e.uploadOnComplete}}):e._e()],1)},o=[],r=(a("cae4"),a("1f4c")),l=a("0fda"),i=a("a4e7"),n=a("192d"),c=(a("ce79"),a("80ee"),{name:"HomeCompareLeft",components:{UploadDialog:r["a"],UploadFileOrCreateTask:l["a"]},data(){return{index:1,total:0,IsUploadDialogShow:!1,compareLogData:void 0,currentLookUpCompareGroupIndex:0,currentPage:0,pageSize:3,totalPages:0,isLoading:!1,isFoldArray:["查看更多"],compareWorkName:"对比任务",openUploadFileOrCreateTaskVisible:!1,CreateTaskDialogVisible:!1,heightLimit:document.body.clientHeight-66}},computed:{noMore(){return this.currentPage>=this.totalPages},taskGroupName(){var e;return null===(e=this.compareLogData)||void 0===e?void 0:e.name},heightPXLimit(){return this.heightLimit+"px"},compareResultImgUrl(){var e;return null===(e=this.compareResult)||void 0===e?void 0:e.url},compareResultReferenceFileName(){try{return this.compareResult.files[0].name}catch(e){}return""},compareResultCompareFileName(){try{return this.compareResult.files[1].name}catch(e){}return""},compareResult(){try{return this.compareLogData.orders[this.currentLookUpCompareGroupIndex]}catch(e){}return{}}},methods:{handleOnClickUpload(){this.IsUploadDialogShow=!0},handleOnCreatedTask(){setTimeout(()=>{this.refreshData()},1e3)},uploadOnComplete(){this.IsUploadDialogShow=!1,this.refreshData()},isShow(e){"查看更多"===this.isFoldArray[e]?this.isFoldArray.splice(e,1,"收起"):this.isFoldArray.splice(e,1,"查看更多")},gotoCompareResult(e){this.currentLookUpCompareGroupIndex=e},downloadCompareResult(e){window.open(n["a"].getDownloadUrl([e]))},changeLayout(){console.log("用另一种布局方式显示文件,上下布局"),this.$router.push({name:"HomeCompareUp"})},refreshData(){void 0===this.$route.query.taskId?i["a"].getAll(1,1).then(e=>{console.log("刷新数据ing"),this.compareLogData=e.records[0];let t=this.compareLogData.orders.length;this.isFoldArray=[...new Array(t)].map(()=>"查看更多"),console.log("compareLogData-cre",this.compareLogData)}):i["a"].find({taskId:Number(this.$route.query.taskId)}).then(e=>{this.compareLogData=e,void 0!==this.$route.query.compareId&&e.orders.forEach((e,t)=>{Number(e.id)===Number(this.$route.query.compareId)&&(this.currentLookUpCompareGroupIndex=t)})})}},created(){this.refreshData()},mounted(){console.log("compareLogData-mounted",this.compareLogData)}}),p=c,m=(a("866c"),a("a9a2")),u=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-6fe34145.6d171098.js.map