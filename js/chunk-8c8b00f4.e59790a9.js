(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c8b00f4"],{"1f78":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"compare-up-container-main",style:{height:e.heightPXLimit}},[t("el-header",{staticClass:"container-el-header",attrs:{width:"0"}},[t("div",{staticClass:"container-header-left"},[t("div",{staticClass:"left"},[e._v("对比记录")]),t("div",{staticClass:"left-panel-right"},[t("a",{attrs:{title:"切换布局"},on:{click:function(t){return e.changeLayout()}}},[t("svg-icon",{attrs:{"class-name":"svg-transform","icon-class":"transform"}})],1),t("UploadFileOrCreateTask",{staticClass:"upload-file-or-create-task",on:{"on-click-upload":e.handleOnClickUpload}})],1)]),t("div",{staticClass:"container-header-right"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.downLoadBatch}},[e._v("下载 ")])],1)]),t("el-main",{ref:"compareUpElMain",staticClass:"compare-up-el-main"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-row-style":{background:"RGB(246,248,250)"},"row-class-name":e.tableCellClassName,"header-cell-style":{background:"RGB(246,248,250)"},"max-height":e.tableHeight}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:a.row.orders,"show-header":!1,"row-class-name":e.tableCellClassName}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{staticStyle:{width:"100%",height:"300px",overflow:"hidden",position:"relative"},on:{mouseenter:function(t){e.row.isZoomIn=!e.row.isZoomIn},mouseleave:function(t){e.row.isZoomIn=!e.row.isZoomIn}}},[t("el-image",{staticStyle:{width:"100%",height:"auto"},attrs:{src:e.row.url,"preview-src-list":[e.row.url]}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.row.isZoomIn,expression:"props.row.isZoomIn"}],staticClass:"cover"},[t("div",{staticClass:"el-icon-zoom-in"})])],1)]}}],null,!0)}),t("el-table-column",{attrs:{width:"40"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-checkbox",{on:{change:function(t){return e.compareGroupCheckboxClick({taskIndex:a.row.index,compareIndex:o.row.index})}},model:{value:e.tableData[a.row.index].orders[o.row.index].checked,callback:function(t){e.$set(e.tableData[a.row.index].orders[o.row.index],"checked",t)},expression:"\n                    tableData[props.row.index].orders[params.row.index]\n                      .checked\n                  "}})]}}],null,!0)}),t("el-table-column",{attrs:{label:"流水帐号",prop:"serialNumber",width:"240"}}),t("el-table-column",{attrs:{label:"名称",prop:"title"}}),t("el-table-column",{attrs:{label:"对比费用",prop:"fee",width:"150"}}),t("el-table-column",{attrs:{label:"支付状态",prop:"status",width:"150"}}),t("el-table-column",{attrs:{label:"对比状态",prop:"status",width:"150"}}),t("el-table-column",{attrs:{label:"对比结果",prop:"result",width:"150"}}),t("el-table-column",{attrs:{label:"时间",prop:"createTime",width:"200"}}),t("el-table-column",{attrs:{width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"act"},[t("svg-icon",{attrs:{"icon-class":"show-eye"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.lookUpCompareResult(a.row.taskId,a.row.id)}}},[e._v("查看")]),t("el-divider",{attrs:{direction:"vertical"}}),t("svg-icon",{attrs:{"icon-class":"download"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.downloadSingleFile(a.row.id,"compare")}}},[e._v("下载")]),t("el-divider",{attrs:{direction:"vertical"}}),t("svg-icon",{attrs:{"icon-class":"bin"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.deleteTask(a.row)}}},[e._v("删除")])],1)]}}],null,!0)})],1)]}}])}),t("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-checkbox",{attrs:{indeterminate:e.taskGroupIndeterminate({taskIndex:a.row.index})},on:{change:function(t){return e.taskGroupTableCheckboxClick({taskIndex:a.row.index})}},model:{value:e.tableData[a.row.index].checked,callback:function(t){e.$set(e.tableData[a.row.index],"checked",t)},expression:"tableData[params.row.index].checked"}})]}}])}),t("el-table-column",{attrs:{label:"流水编号/任务ID",prop:"id",width:"240"}}),t("el-table-column",{attrs:{label:"名称",prop:"name"}}),t("el-table-column",{attrs:{label:"对比费用",prop:"fee",width:"150"}}),t("el-table-column",{attrs:{label:"支付状态",prop:"payState",width:"150"}}),t("el-table-column",{attrs:{label:"对比状态",prop:"payState",width:"150"}}),t("el-table-column",{attrs:{label:"对比结果",prop:"contrastResult",width:"150"}}),t("el-table-column",{attrs:{label:"时间",prop:"createTime",width:"200"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"act"},[t("svg-icon",{attrs:{"icon-class":"show-eye"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.lookUpCompareResult(a.row.id)}}},[e._v("查看")]),t("el-divider",{attrs:{direction:"vertical"}}),t("svg-icon",{attrs:{"icon-class":"download"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.downloadSingleFile(a.row.id,"task")}}},[e._v("下载")]),t("el-divider",{attrs:{direction:"vertical"}}),t("svg-icon",{attrs:{"icon-class":"bin"}}),t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.deleteTask(a.row)}}},[e._v("删除")])],1)]}}])})],1),t("el-footer",[t("el-row",{staticClass:"pagination"},[t("el-col",{attrs:{span:24}},[t("el-pagination",{attrs:{"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total,"current-page":e.pagination.currentPage,background:""},on:{"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)},"current-change":e.handleCurrentChange,"size-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}})],1)],1)],1)],1),e.IsUploadDialogShow?t("UploadDialog",{attrs:{"task-id":1},on:{onClose:function(t){e.IsUploadDialogShow=!1},onComplete:e.uploadOnComplete}}):e._e()],1)},l=[],i=(a("cae4"),a("a4e7"));var n=a("0fda"),r=a("1f4c"),s=a("192d"),c={name:"HomeCompareUp",components:{UploadDialog:r["a"],UploadFileOrCreateTask:n["a"]},data(){return{dataCollection:[],IsUploadDialogShow:!1,multipleSelection:[],ordersId:[],tableData:[],pageSizes:[10,20,30,40],pagination:{total:220,pageSize:10,currentPage:1},heightLimit:document.body.clientHeight-66,tableHeight:document.body.clientHeight-66-120-60+"px"}},computed:{heightPXLimit(){return this.heightLimit+"px"}},methods:{taskGroupIndeterminate({taskIndex:e}){try{return this.tableData[e].indeterminate}catch(t){console.log(t)}return!1},taskGroupTableCheckboxClick({taskIndex:e}){let t=this.tableData[e].checked;this.tableData[e].orders.forEach((a,o)=>{this.tableData[e].orders[o].checked=t})},compareGroupCheckboxClick({taskIndex:e,compareIndex:t}){this.tableData[e].indeterminate=!0;let a=!0;for(let l=0;l<this.tableData[e].orders.length;l++)if(!1===this.tableData[e].orders[l].checked){a=!1;break}let o=!0;for(let l=0;l<this.tableData[e].orders.length;l++)if(!0===this.tableData[e].orders[l].checked){o=!1;break}this.tableData[e].indeterminate=!a&&!o,this.tableData[e].checked=a&&!this.tableData[e].indeterminate},uploadOnComplete(){this.IsUploadDialogShow=!1},handleOnClickUpload(){this.IsUploadDialogShow=!0},deleteTask(e){i["a"].delTaskByIds(e),this.$notify({title:"删除成功！",type:"success"})},downloadSingleFile(e,t){"task"===t?window.open(s["a"].getTaskDownloadUrl([e])):window.open(s["a"].getDownloadUrl([e]))},lookUpCompareResult(e,t=null){this.$router.push({name:"HomeCompareLeft",query:{taskId:e+"",compareId:t+""}})},handleDelete(e,t){console.log("你还勾选了我们要选的",e,t)},tableCellClassName({row:e,rowIndex:t}){e.index=t},selectTaskGroup(e){for(const t of e){let e=t.index;if(this.dataCollection[e].item){let t=this.dataCollection[e];t.item=!1,this.$set(this.dataCollection,e,t)}else{let t=this.dataCollection[e];t.item=!0,this.$set(this.dataCollection,e,t),this.$refs.multipleTable&&this.$refs.multipleTable.toggleAllSelection()}}},changeLayout(){console.log("打开左右布局"),this.$router.push({name:"HomeCompareLeft"})},async getAll(e){let t=await i["a"].getAll(e,this.pagination.pageSize);this.pagination.total=t.total,t.records=t.records.map((e,t)=>(e.orders=e.orders.map((e,t)=>(this.$set(e,"checked",!1),this.$set(e,"index",t),e)),e.orders=e.orders.filter(e=>null!==e.id),e.orders.forEach(e=>{e["isZoomIn"]=!1}),this.$set(e,"index",t),this.$set(e,"checked",!1),this.$set(e,"indeterminate",!1),e)),this.tableData=t.records,console.log("this.dataCollection",this.tableData)},handleCurrentChange(e){this.getAll(e),console.log("当前页: "+e)},downLoadBatch(){let e=this.tableData.map((e,t)=>e.orders.map((e,t)=>{if(e.checked)return e.id}));e=e.flat(),e=e.filter(e=>void 0!==e),0!==e.length?window.open(s["a"].getDownloadUrl(e)):this.$message.error("请先选择需要下载的项目")}},created(){this.getAll(1)},mounted(){}},d=c,p=(a("a180"),a("a9a2")),u=Object(p["a"])(d,o,l,!1,null,null,null);t["default"]=u.exports},"94ff":function(e,t,a){},a180:function(e,t,a){"use strict";a("94ff")}}]);
//# sourceMappingURL=chunk-8c8b00f4.e59790a9.js.map